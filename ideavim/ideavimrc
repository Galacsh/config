source ~/.vim/common_options.vimrc
source ~/.vim/common_keymap.vimrc

" =================================
" == IdeaVim only configurations ==
" =================================

set notimeout

" =============
" == Plugins ==
" =============

set ideastatusicon=gray
set which-key
let g:WhichKey_DefaultDelay='1000'
set NERDTree
set surround
set commentary
set highlightedyank
let g:highlightedyank_highlight_duration='100'
let g:highlightedyank_highlight_color='rgba(255, 255, 255, 50)'

" =========================
" == IdeaVim only Keymap ==
" =========================

" [Explorer]
noremap <Leader>e :NERDTreeFind<CR>

" [Closing is too hard]
map <Leader>q <Action>(CloseContent)
map <Leader>Q <Action>(CloseAllEditors)
nmap <Leader>w <Action>(HideAllWindows)

" [Find / Replace text] using IntelliJ actions
map n <Action>(FindNext)
map N <Action>(FindPrevious)
map / <Action>(Find)
map % <Action>(Replace)

" [Find]
nmap <Leader><Leader> <Action>(Switcher)
nmap <Leader>fs <Action>(FindInPath)
nmap <Leader>ff <Action>(GotoFile)
nmap <Leader>fb <Action>(GotoAction)
nmap <Leader>fu <Action>(ShowUsages)
nmap <Leader>fU <Action>(FindUsages)

" [Menu]
nmap <Leader>mm <Action>(MainMenu)
nmap <Leader>mb <Action>(BuildMenu)
nmap <Leader>mc <Action>(CodeMenu)
nmap <Leader>mt <Action>(ToolWindowsGroup)

" [Collapse / Expand]
nmap <Leader>, <Action>(CollapseRegion)
nmap <Leader>. <Action>(ExpandRegion)
nmap <Leader>< <Action>(CollapseAllRegions)
nmap <Leader>> <Action>(ExpandAllRegions)

" [Terminal]
nmap <Leader>` <Action>(ActivateTerminalToolWindow)

" [Mark]
nnoremap <silent> m0 :delmarks 0-9a-zA-Z<CR>
nnoremap <silent> <Leader>0 :marks 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ<CR>
nmap m1 <Action>(ToggleBookmark1)
nmap m2 <Action>(ToggleBookmark2)
nmap m3 <Action>(ToggleBookmark3)
nmap m4 <Action>(ToggleBookmark4)
nmap m5 <Action>(ToggleBookmark5)
nmap m6 <Action>(ToggleBookmark6)
nmap m7 <Action>(ToggleBookmark7)
nmap m8 <Action>(ToggleBookmark8)
nmap m9 <Action>(ToggleBookmark9)
nmap <Leader>1 <Action>(GotoBookmark1)
nmap <Leader>2 <Action>(GotoBookmark2)
nmap <Leader>3 <Action>(GotoBookmark3)
nmap <Leader>4 <Action>(GotoBookmark4)
nmap <Leader>5 <Action>(GotoBookmark5)
nmap <Leader>6 <Action>(GotoBookmark6)
nmap <Leader>7 <Action>(GotoBookmark7)
nmap <Leader>8 <Action>(GotoBookmark8)
nmap <Leader>9 <Action>(GotoBookmark9)

" [Code]
nmap <Leader>ca <Action>(ShowIntentionActions)
nmap <Leader>cg <Action>(Generate)
nmap <Leader>ct <Action>(GoToTest)
nmap gd <Action>(GotoDeclaration)
nmap gr <Action>(GotoDeclaration)
nmap gi <Action>(GotoImplementation)
nmap gt <Action>(QuickTypeDefinition)
nmap g<S-d> <Action>(GotoTypeDeclaration)
nmap <S-k> <Action>(QuickJavaDoc)

" [Problems / Quickfix]
nmap <Leader>xd <Action>(ShowErrorDescription)
nmap <Leader>xn <Action>(GotoNextError)
nmap <Leader>xp <Action>(GotoPreviousError)
nmap <Leader>xx <Action>(ActivateProblemsViewToolWindow)

" [process] - build/debug/run/test
nmap <Leader>pr <Action>(ChooseRunConfiguration)
nmap <Leader>pd <Action>(ChooseDebugConfiguration)
nmap <Leader>pp <Action>(RunnerActions)
nmap <Leader>ps <Action>(Stop)

" [refactor]
map <Leader>rr <Action>(Refactorings.QuickListPopupAction)
map <Leader>rn <Action>(RenameElement)
map <Leader>rf <Action>(ReformatCode)
map <Leader>ro <Action>(OptimizeImports)
map <Leader>rs <Action>(osmedile.intellij.stringmanip.PopupChoiceAction)
map <Leader>rN <Action>(RenameFile)

" [Git]
" Enable 'Staging Area'
map <Leader>gg <Action>(Vcs.QuickListPopupAction)
map <Leader>gd <Action>(Compare.SameVersion)
map <Leader>gr <Action>(Vcs.RollbackChangedLines)
map <Leader>gc <Action>(Git.Commit.Stage)
map <Leader>gps <Action>(Vcs.Push)
map <Leader>gpl <Action>(Git.Pull)
map <Leader>gf <Action>(Git.Fetch)
map <Leader>gh <Action>(Vcs.ShowTabbedFileHistory)
map <Leader>gH <Action>(Vcs.Show.Log)
map <Leader>ga <Action>(Git.Add)

